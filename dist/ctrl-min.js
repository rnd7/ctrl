!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ctrl=e():t.ctrl=e()}(window,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";function i(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}s.r(e);var r=2*Math.PI;function n(t,e){return(t%e+e)%e}function a(t,e,s){return Math.min(s||1,Math.max(e||0,t))}function o(t,e,s,i,n,a,o){a=a||0,o=o||r,t.beginPath(),t.arc(e,s,i,a,o,!1),t.arc(e,s,n,o,a,!0),t.closePath()}var h={observeSize:!1,sizeFromParent:!0,eventMode:"value",speed:.01,value:0,initialChangeEvent:!0,keepTarget:!1,disabled:!1,neutralAngle:-(Math.PI/2),borderRadius:2,borderColor:"rgb(12,12,12)",borderFocusColor:"rgb(0,0,80)",backgroundColor:"rgb(36,36,36)",steps:1,stepGap:r/360,trackSize:12,trackSector:.8*r,trackSectorColor:"rgb(66,66,66)",valueSector:r/48,valueSectorColor:"rgb(255,255,255)",targetSector:r/48,targetSectorColor:"rgba(170,170,255,.5)"},u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=document.createElement("CANVAS"),this._canvas.tabIndex=0,this._canvas.style.outline=0,this._canvas.style.userSelect="none",this._canvas.style.cursor="pointer",this._ctx=this._canvas.getContext("2d"),this._target=null,this._mouseX=0,this._mouseY=0,this._mouseAngle=0,this._bound={startDrag:this.startDrag.bind(this),stopDrag:this.stopDrag.bind(this),drag:this.drag.bind(this),focus:this.focus.bind(this),blur:this.blur.bind(this)},this.assign(h,e),null===this.target&&(this.target=this.value),this._canvas.addEventListener("mousedown",this._bound.startDrag),this._canvas.addEventListener("focus",this._bound.focus,!0),this._canvas.addEventListener("blur",this._bound.blur,!0)}return function(t,e,s){e&&i(t.prototype,e),s&&i(t,s)}(t,[{key:"startDrag",value:function(t){this._disabled||(this._dragging=!0,this._canvas.removeEventListener("mousedown",this._bound.startDrag),this._canvas.removeEventListener("touchstart",this._bound.startDrag),document.addEventListener("mousemove",this._bound.drag),document.addEventListener("touchmove",this._bound.drag),document.addEventListener("mouseup",this._bound.stopDrag),document.addEventListener("mouseleave",this._bound.stopDrag),document.addEventListener("dragleave",this._bound.stopDrag),document.addEventListener("touchcancel",this._bound.stopDrag),document.addEventListener("touchend",this._bound.stopDrag),this._evalMousePosition(t))}},{key:"drag",value:function(t){this._disabled||this._evalMousePosition(t)}},{key:"stopDrag",value:function(t){this._disabled||(this._dragging=!1,document.removeEventListener("mousemove",this._bound.drag),document.removeEventListener("touchmove",this._bound.drag),document.removeEventListener("mouseup",this._bound.stopDrag),document.removeEventListener("mouseleave",this._bound.stopDrag),document.removeEventListener("dragleave",this._bound.stopDrag),document.removeEventListener("touchcancel",this._bound.stopDrag),document.removeEventListener("touchend",this._bound.stopDrag),this._canvas.addEventListener("mousedown",this._bound.startDrag),this._canvas.addEventListener("touchstart",this._bound.startDrag),this._evalMousePosition(t))}},{key:"focus",value:function(t){this._disabled||(this._focus=!0,this.redraw())}},{key:"blur",value:function(t){this._disabled||(this._focus=!1,this.redraw())}},{key:"on",value:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.addEventListener.apply(this,e)}},{key:"addEventListener",value:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this._canvas.addEventListener.apply(this._canvas,e),this._initialChangeEvent&&this._dispatchChangeEvent(!0)}},{key:"off",value:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.removeEventListener.apply(this,e)}},{key:"removeEventListener",value:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this._canvas.removeEventListener.apply(this._canvas,e)}},{key:"assign",value:function(){var t=this;this._bulkAssign=!0;for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];s.forEach(function(e){Object.assign(t,e)}),this._bulkAssign=!1,this._redraw&&this._loop()}},{key:"fitParent",value:function(){this._parent&&(this._width=this._parent.offsetWidth,this._height=this._parent.offsetHeight,this._resizeCanvas())}},{key:"redraw",value:function(){this._redraw=!0,this._bulkAssign||this._loop()}},{key:"_resizeCanvas",value:function(){this._canvasSize=Math.min(this._width,this._height),this._radius=this._canvasSize/2,this._centerX=this._centerY=this._radius,this.redraw()}},{key:"_attachDomElement",value:function(){this.parent&&this._canvas&&(this._parent.appendChild(this._canvas),this.fitParent(),this.redraw())}},{key:"_evalMousePosition",value:function(t){this._mouseX=t.touches?t.touches[0].pageX:t.pageX,this._mouseY=t.touches?t.touches[0].pageY:t.pageY,this._mouseAngle=function(t,e,s,i){var n=Math.atan2(i-e,s-t);return n<0&&(n+=r),n}(this._canvas.offsetLeft+this._canvasSize/2,this._canvas.offsetTop+this._canvasSize/2,this._mouseX,this._mouseY);var e=this._neutralAngle-Math.PI,s=(r-(this._trackSector-this._valueSector))/r,i=n(this._mouseAngle-e,r)/r*(r/(this._trackSector-this._valueSector))-(s+this._valueSector/2)/2;this._target=a(i),this.redraw()}},{key:"_dispatchChangeEvent",value:function(t){!t&&("none"===this._eventMode||"value"===this._eventMode&&this._lastEventValue==this._value||"target"===this._eventMode&&this._lastEventTarget==this._target||"step"===this._eventMode&&this._lastEventStep==this.step||"complete"===this._eventMode&&this._value!=this._target)||(this._canvas.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{step:this.step,value:this._value,target:this._target,component:this}})),this._lastEventValue=this._value,this._lastEventTarget=this._target,this._lastEventStep=this.step)}},{key:"_loop",value:function(){var t=this;!this._animationFrame&&(this._observeSize||this._dragging||this._redraw||this._value!=this._target)&&(this._animationFrame=window.requestAnimationFrame(function(){var e=t._dragging||t._redraw;t._value!=t._target&&(t.speed&&t._value+t._speed<=t._target?t._value+=t._speed:t.speed&&t._value-t._speed>=t._target?t._value-=t._speed:t._value=t._target,e=!0,t._dispatchChangeEvent()),t._observeSize&&t._sizeFromParent&&(t._parent.offsetWidth!=t._width||t._parent.offsetHeight!=t._height)&&(t.fitParent(),e=!0),t._animationFrame=null,e&&t._draw(),t._loop()}))}},{key:"_draw",value:function(){var t,e,s=this._ctx,i=this._centerX,a=this._centerY,h=this._borderRadius,u=Math.min(this._radius/3,this._trackSize),c=-this._trackSector/2+this._neutralAngle,_=c+this._trackSector,l=function(t,e){var s=n(t-e,r),i=n(e-t,r);return s<i?-s:i}(c,_),d=this._target,v=this._value,g=this._radius-h,f=this._radius-h-u;if(s.canvas.width!=this._canvasSize||s.canvas.height!=this._canvasSize?s.canvas.width=s.canvas.height=this._canvasSize:s.clearRect(0,0,this._canvasSize,this._canvasSize),s.save(),s.beginPath(),s.fillStyle=this._focus?this._borderFocusColor:this._borderColor,s.arc(i,a,this._radius,0,r),s.arc(i,a,f-h,0,r,!0),s.clip(),s.fill(),s.restore(),s.fillStyle=this._backgroundColor,o(s,i,a,g,f),s.fill(),this._steps<2)s.fillStyle=this._trackSectorColor,o(s,i,a,g,f,c,_),s.fill(),v!=d&&(e=(t=d*(r+l-this._targetSector)+c)+this._targetSector,s.fillStyle=this._targetSectorColor,o(s,i,a,g,f,t,e),s.fill()),e=(t=v*(r+l-this._valueSector)+c)+this._valueSector,s.fillStyle=this._valueSectorColor,o(s,i,a,g,f,t,e),s.fill();else for(var p=this._trackSector/this._steps,b=(this._steps,this.step),m=this.targetStep,S=0;S<this._steps;S++)t=n(c+p*S,r)+this._stepGap,e=n(c+p*(S+1),r)-this._stepGap,s.fillStyle=this._trackSectorColor,o(s,i,a,g,f,t,e),s.fill(),b==S?(s.fillStyle=this._valueSectorColor,o(s,i,a,g,f,t,e),s.fill()):v!=d&&m==S&&(s.fillStyle=this._targetSectorColor,o(s,i,a,g,f,t,e),s.fill());this._redraw=!1}},{key:"initialChangeEvent",set:function(t){this._initialChangeEvent!=t&&(this._initialChangeEvent=t)},get:function(){return this._initialChangeEvent}},{key:"eventMode",set:function(t){this._eventMode=t},get:function(){return this._eventMode}},{key:"selector",set:function(t){this._selector=t,this.parent=document.querySelector(this._selector)},get:function(){return this._selector}},{key:"parent",set:function(t){this._parent=t,this._attachDomElement()},get:function(){return this._parent}},{key:"value",set:function(t){this._value!=t&&(this._value=a(t),this._bulkAssign||(this.target=this._value),this.redraw())},get:function(){return this._value}},{key:"trackSector",set:function(t){this._trackSector!=t&&(this._trackSector=t,this.redraw())},get:function(){return this._trackSector}},{key:"target",set:function(t){this._target!=t&&(this._target=a(t),this.redraw())},get:function(){return this._target}},{key:"keepTarget",set:function(t){this._keepTarget!=t&&(this._keepTarget=t)},get:function(){return this._keepTarget}},{key:"steps",set:function(t){this._steps!=t&&(this._steps=Math.max(1,t),this.redraw())},get:function(){return this._steps}},{key:"step",get:function(){return Math.round(this._value*(this._steps-1))},set:function(t){this.value=t/this._steps}},{key:"targetStep",get:function(){return Math.round(this._target*(this._steps-1))},set:function(t){this.target=t/this._steps}},{key:"neutralAngle",set:function(t){this._neutralAngle!=t&&(this._neutralAngle=t,this.redraw())},get:function(){return this._neutralAngle}},{key:"sizeFromParent",set:function(t){this._sizeFromParent!=t&&(this._sizeFromParent=t,this._sizeFromParent&&this.fitParent())},get:function(){return this._sizeFromParent}},{key:"width",set:function(t){this._width!=t&&(this._width=t,this._resizeCanvas())},get:function(){return this._width}},{key:"height",set:function(t){this._height!=t&&(this._height=t,this._resizeCanvas())},get:function(){return this._height}},{key:"speed",set:function(t){this._speed!=t&&(this._speed=t)},get:function(){return this._speed}},{key:"targetSector",set:function(t){this._targetSector!=t&&(this._targetSector=t,this.redraw())},get:function(){return this._targetSector}},{key:"valueSector",set:function(t){this._valueSector!=t&&(this._valueSector=t,this.redraw())},get:function(){return this._valueSector}},{key:"stepGap",set:function(t){this._stepGap!=t&&(this._stepGap=t,this.redraw())},get:function(){return this._stepGap}},{key:"disabled",set:function(t){this._disabled!=t&&(this._disabled=t,this._disabled&&this._dragging&&this.stopDrag(),this._disabled&&this._focus&&this.blur(),this.redraw())},get:function(){return this._disabled}},{key:"observeSize",set:function(t){this._observeSize!=t&&(this._observeSize=t,this._observeSize&&this._loop())},get:function(){return observeSize}},{key:"borderRadius",set:function(t){this._borderRadius!=t&&(this._borderRadius=t,this.redraw())},get:function(){return this._borderRadius}},{key:"trackSize",set:function(t){this._trackSize!=t&&(this._trackSize=t,this.redraw())},get:function(){return this._trackSize}},{key:"valueSectorColor",set:function(t){this._valueSectorColor!=t&&(this._valueSectorColor=t,this.redraw())},get:function(){return this._valueSectorColor}},{key:"trackSectorColor",set:function(t){this._trackSectorColor!=t&&(this._trackSectorColor=t,this.redraw())},get:function(){return this._trackSectorColor}},{key:"borderColor",set:function(t){this._borderColor!=t&&(this._borderColor=t,this.redraw())},get:function(){return this._borderColor}},{key:"borderFocusColor",set:function(t){this._borderFocusColor!=t&&(this._borderFocusColor=t,this.redraw())},get:function(){return this._borderFocusColor}},{key:"backgroundColor",set:function(t){this._backgroundColor!=t&&(this._backgroundColor=t,this.redraw())},get:function(){return this._backgroundColor}},{key:"targetSectorColor",set:function(t){this._targetSectorColor!=t&&(this._targetSectorColor=t,this.redraw())},get:function(){return this._targetSectorColor}},{key:"domElement",get:function(){return this._canvas}}]),t}();s.d(e,"Rotary",function(){return u})}])});
//# sourceMappingURL=ctrl-min.js.map